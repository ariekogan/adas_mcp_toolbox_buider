# Validation Coverage Matrix

> **Auto-generated:** 2025-01-16
>
> Do not edit this file directly. It is generated from COVERAGE metadata in validator files.
>
> Run `npm run generate:coverage` to regenerate.

---

## Coverage Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         VALIDATION COVERAGE                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Section          â”‚ Schema       â”‚ Reference    â”‚ Completeness â”‚ Consistency â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ problem          â”‚ âœ…           â”‚ âŒ           â”‚ âœ…           â”‚ âŒ          â”‚
â”‚ scenarios        â”‚ âœ…           â”‚ âœ…           â”‚ âœ…           â”‚ âŒ          â”‚
â”‚ role             â”‚ âœ…           â”‚ âŒ           â”‚ âœ…           â”‚ âŒ          â”‚
â”‚ intents          â”‚ âœ…           â”‚ âœ…           â”‚ âœ…           â”‚ âŒ          â”‚
â”‚ tools            â”‚ âœ…           â”‚ âœ…           â”‚ âœ…           â”‚ âœ…          â”‚
â”‚ policy           â”‚ âœ…           â”‚ âœ…           â”‚ âœ…           â”‚ âœ…          â”‚
â”‚ engine           â”‚ âœ…           â”‚ âŒ           â”‚ âŒ           â”‚ âŒ          â”‚
â”‚ mocks            â”‚ âŒ           â”‚ âŒ           â”‚ âœ…           â”‚ âŒ          â”‚
â”‚ metadata         â”‚ âœ…           â”‚ âŒ           â”‚ âŒ           â”‚ âŒ          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Legend: âœ… = Has checks, âŒ = No checks

## Statistics

- **Total checks:** 72
- **Schema checks:** 48
- **Reference checks:** 8
- **Completeness checks:** 7
- **Consistency checks:** 9

- **Deterministic:** 63 checks
- **LLM-based:** 9 checks

- **Known gaps:** 8
  - High priority: 3
  - Medium priority: 4
  - Low priority: 1

---

## Detailed Coverage by Section

### Problem

| Field | Check | Type | Method |
|-------|-------|------|--------|
| `problem` | Section exists | schema | âš™ï¸ core |
| `problem.statement` | Is string | schema | âš™ï¸ core |
| `problem.goals` | Is array | schema | âš™ï¸ core |
| `problem.statement` | Has statement (â‰¥10 chars) | completeness | âš™ï¸ core |

### Scenarios

| Field | Check | Type | Method |
|-------|-------|------|--------|
| `scenarios[].id` | Has ID | schema | âš™ï¸ core |
| `scenarios[].title` | Has title (string) | schema | âš™ï¸ core |
| `scenarios[].steps` | Is array | schema | âš™ï¸ core |
| `scenarios[].id` | No duplicate IDs | reference | âš™ï¸ core |
| `scenarios` | At least 1 scenario with title | completeness | âš™ï¸ core |

### Role

| Field | Check | Type | Method |
|-------|-------|------|--------|
| `role` | Section exists | schema | âš™ï¸ core |
| `role.communication_style.tone` | Valid enum (formal/casual/technical) | schema | âš™ï¸ core |
| `role.communication_style.verbosity` | Valid enum (concise/balanced/detailed) | schema | âš™ï¸ core |
| `role` | Has name and persona | completeness | âš™ï¸ core |

### Intents

| Field | Check | Type | Method |
|-------|-------|------|--------|
| `intents` | Section exists | schema | âš™ï¸ core |
| `intents.thresholds.accept` | Between 0-1 | schema | âš™ï¸ core |
| `intents.thresholds.clarify` | Between 0-1 | schema | âš™ï¸ core |
| `intents.supported[].id` | Has ID | schema | âš™ï¸ core |
| `intents.supported[].description` | Has description | schema | âš™ï¸ core |
| `intents.supported[].examples` | Has examples array | schema | âš™ï¸ core |
| `intents.supported[].entities[].name` | Has name | schema | âš™ï¸ core |
| `intents.supported[].entities[].type` | Valid data type | schema | âš™ï¸ core |
| `intents.out_of_domain.action` | Valid enum (redirect/reject/escalate) | schema | âš™ï¸ core |
| `intents.supported[].maps_to_workflow` | Workflow exists | reference | âš™ï¸ core |
| `intents.supported[].id` | No duplicate IDs | reference | âš™ï¸ core |
| `intents.supported` | At least 1 intent with description + examples | completeness | âš™ï¸ core |

### Tools

| Field | Check | Type | Method |
|-------|-------|------|--------|
| `tools[].id` | Has ID | schema | âš™ï¸ core |
| `tools[].name` | Has name (string) | schema | âš™ï¸ core |
| `tools[].description` | Has description | schema | âš™ï¸ core |
| `tools[].inputs` | Is array | schema | âš™ï¸ core |
| `tools[].inputs[].name` | Has name | schema | âš™ï¸ core |
| `tools[].inputs[].type` | Valid data type | schema | âš™ï¸ core |
| `tools[].output` | Has output | schema | âš™ï¸ core |
| `tools[].output.type` | Valid data type | schema | âš™ï¸ core |
| `tools[].policy.allowed` | Valid enum (always/conditional/never) | schema | âš™ï¸ core |
| `tools[].mock.mode` | Valid enum (examples/llm/hybrid) | schema | âš™ï¸ core |
| `tools[].mock_status` | Valid enum (untested/tested/skipped) | schema | âš™ï¸ core |
| `tools[].id` | No duplicate IDs | reference | âš™ï¸ core |
| `tools[].name` | No duplicate names | reference | âš™ï¸ core |
| `tools` | At least 1 tool with name, description, output | completeness | âš™ï¸ core |
| `tools[].name` | Naming convention consistency | consistency | ğŸ”§ deterministic |
| `tools[].name` | Similar/duplicate names | consistency | ğŸ¤– llm |
| `tools[].description` | Ambiguous descriptions | consistency | ğŸ¤– llm |
| `tools` | Overlapping functionality | consistency | ğŸ¤– llm |

### Policy

| Field | Check | Type | Method |
|-------|-------|------|--------|
| `policy` | Section exists | schema | âš™ï¸ core |
| `policy.guardrails.never` | Is array | schema | âš™ï¸ core |
| `policy.guardrails.always` | Is array | schema | âš™ï¸ core |
| `policy.workflows[].id` | Has ID | schema | âš™ï¸ core |
| `policy.workflows[].name` | Has name | schema | âš™ï¸ core |
| `policy.workflows[].steps` | Is array | schema | âš™ï¸ core |
| `policy.approvals[].id` | Has ID | schema | âš™ï¸ core |
| `policy.approvals[].tool_id` | Has tool_id | schema | âš™ï¸ core |
| `policy.workflows[].steps` | Steps reference existing tools | reference | âš™ï¸ core |
| `policy.approvals[].tool_id` | Tool exists | reference | âš™ï¸ core |
| `policy.workflows[].id` | No duplicate IDs | reference | âš™ï¸ core |
| `policy.guardrails` | At least 1 guardrail (never or always) | completeness | âš™ï¸ core |
| `policy.guardrails` | Conflicting never/always rules | consistency | ğŸ¤– llm |
| `policy.guardrails` | Duplicate rules | consistency | ğŸ¤– llm |
| `policy.guardrails` | Vague guardrails | consistency | ğŸ¤– llm |
| `policy.workflows` | Incomplete workflows | consistency | ğŸ¤– llm |
| `policy.workflows[].steps` | Steps reference non-existent tools | consistency | ğŸ¤– llm |

### Engine

| Field | Check | Type | Method |
|-------|-------|------|--------|
| `engine` | Section exists | schema | âš™ï¸ core |
| `engine.rv2.max_iterations` | At least 1 | schema | âš™ï¸ core |
| `engine.rv2.on_max_iterations` | Valid enum (escalate/fail/ask_user) | schema | âš™ï¸ core |
| `engine.hlr.critic.strictness` | Valid enum (low/medium/high) | schema | âš™ï¸ core |
| `engine.autonomy.level` | Valid enum (autonomous/supervised/restricted) | schema | âš™ï¸ core |
| `engine.finalization_gate.enabled` | Is boolean | schema | âš™ï¸ core |
| `engine.finalization_gate.max_retries` | Number 0-10 | schema | âš™ï¸ core |

### Mocks

| Field | Check | Type | Method |
|-------|-------|------|--------|
| `tools[].mock_status` | All tools tested or skipped | completeness | âš™ï¸ core |

### Metadata

| Field | Check | Type | Method |
|-------|-------|------|--------|
| `id` | Has ID (string) | schema | âš™ï¸ core |
| `name` | Has name (string) | schema | âš™ï¸ core |
| `phase` | Valid phase enum | schema | âš™ï¸ core |

---

## Known Gaps

These checks should be implemented:

| Section | Check | Priority | Suggested Method |
|---------|-------|----------|------------------|
| intents | Overlapping intent examples | ğŸ”´ high | llm |
| intents | Duplicate intent descriptions | ğŸŸ¡ medium | llm |
| intents | Intent naming consistency | ğŸŸ¡ medium | deterministic |
| cross-section | Intent â†’ Tool mapping (can intent be fulfilled?) | ğŸ”´ high | llm |
| cross-section | Scenario â†’ Intent coverage | ğŸŸ¡ medium | llm |
| cross-section | Guardrails vs Tool capabilities conflict | ğŸ”´ high | llm |
| policy | Workflow circular references | ğŸŸ¡ medium | deterministic |
| engine | Settings compatibility | ğŸŸ¢ low | deterministic |

---

## Source Files

Coverage metadata is defined in:

| File | Type |
|------|------|
| `validators/schemaValidator.js` | Schema checks |
| `validators/referenceResolver.js` | Reference checks |
| `validators/completenessChecker.js` | Completeness checks |
| `routes/validate.js` | Consistency checks (on-demand) |
